{"id":1624,"name":"isWeapp","kind":32,"kindString":"Variable","flags":{"isConst":true},"comment":{"summary":[],"blockTags":[{"tag":"@const","content":[{"kind":"text","text":"isWeapp"}]},{"tag":"@description","content":[{"kind":"text","text":"检测代码是否在微信小程序环境中运行。Detects if the code is running in a WeChat mini-program environment by checking for WeChat-specific global objects and APIs."}]},{"tag":"@example","content":[{"kind":"code","text":"```ts\n// Platform-specific canvas handling\nfunction initializeCanvas(options) {\n  if (isWeapp) {\n    // Use WeChat mini-program canvas API\n    const ctx = wx.createCanvasContext(options.canvasId);\n    return { ctx, draw: () => ctx.draw() };\n  } else {\n    // Use standard web canvas API\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    return { canvas, ctx };\n  }\n}\n```"}]},{"tag":"@example","content":[{"kind":"code","text":"```ts\n// Conditional feature availability\nfunction saveChart() {\n  if (isWeapp) {\n    // Use WeChat save API\n    wx.canvasToTempFilePath({\n      canvasId: 'myCanvas',\n      success: (res) => console.log('Saved:', res.tempFilePath)\n    });\n  } else {\n    // Use web download API\n    const link = document.createElement('a');\n    link.download = 'chart.png';\n    link.href = canvas.toDataURL();\n    link.click();\n  }\n}\n```"}]},{"tag":"@since","content":[{"kind":"text","text":"1.0.0"}]}]},"children":[],"sources":[{"fileName":"packages/canvas-utils/src/utils/env.ts","fullFileName":"/home/runner/work/fe-tools/fe-tools/utils/packages/canvas-utils/src/utils/env.ts","line":87,"character":13,"url":"https://github.com/MichealWayne/fe-tools/blob/e75b369/utils/packages/canvas-utils/src/utils/env.ts#L87"}],"type":{"type":"intrinsic","name":"boolean"},"defaultValue":"...","is":{"declaration":true},"location":{"query":"canvas-utils/src.Variable.isWeapp","hash":""},"text":{"comment":"<h5>Const:</h5><p>isWeapp</p>\n<h5>Description:</h5><p>检测代码是否在微信小程序环境中运行。Detects if the code is running in a WeChat mini-program environment by checking for WeChat-specific global objects and APIs.</p>\n<h5>Example:</h5><pre><code class=\"language-ts\"><span class=\"pl-c\">// Platform-specific canvas handling</span>\n<span class=\"pl-k\">function</span> <span class=\"pl-en\">initializeCanvas</span>(<span class=\"pl-v\">options</span>) {\n  <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">isWeapp</span>) {\n    <span class=\"pl-c\">// Use WeChat mini-program canvas API</span>\n    <span class=\"pl-k\">const</span> <span class=\"pl-c1\">ctx</span> <span class=\"pl-k\">=</span> <span class=\"pl-smi\">wx</span>.<span class=\"pl-en\">createCanvasContext</span>(<span class=\"pl-smi\">options</span>.<span class=\"pl-smi\">canvasId</span>);\n    <span class=\"pl-k\">return</span> { <span class=\"pl-smi\">ctx</span>, <span class=\"pl-en\">draw</span>: () <span class=\"pl-k\">=></span> <span class=\"pl-smi\">ctx</span>.<span class=\"pl-en\">draw</span>() };\n  } <span class=\"pl-k\">else</span> {\n    <span class=\"pl-c\">// Use standard web canvas API</span>\n    <span class=\"pl-k\">const</span> <span class=\"pl-c1\">canvas</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">document</span>.<span class=\"pl-c1\">createElement</span>(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>canvas<span class=\"pl-pds\">'</span></span>);\n    <span class=\"pl-k\">const</span> <span class=\"pl-c1\">ctx</span> <span class=\"pl-k\">=</span> <span class=\"pl-smi\">canvas</span>.<span class=\"pl-c1\">getContext</span>(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>2d<span class=\"pl-pds\">'</span></span>);\n    <span class=\"pl-k\">return</span> { <span class=\"pl-smi\">canvas</span>, <span class=\"pl-smi\">ctx</span> };\n  }\n}\n</code></pre>\n<h5>Example:</h5><pre><code class=\"language-ts\"><span class=\"pl-c\">// Conditional feature availability</span>\n<span class=\"pl-k\">function</span> <span class=\"pl-en\">saveChart</span>() {\n  <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">isWeapp</span>) {\n    <span class=\"pl-c\">// Use WeChat save API</span>\n    <span class=\"pl-smi\">wx</span>.<span class=\"pl-en\">canvasToTempFilePath</span>({\n      canvasId: <span class=\"pl-s\"><span class=\"pl-pds\">'</span>myCanvas<span class=\"pl-pds\">'</span></span>,\n      <span class=\"pl-en\">success</span>: (<span class=\"pl-v\">res</span>) <span class=\"pl-k\">=></span> <span class=\"pl-c1\">console</span>.<span class=\"pl-c1\">log</span>(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>Saved:<span class=\"pl-pds\">'</span></span>, <span class=\"pl-smi\">res</span>.<span class=\"pl-smi\">tempFilePath</span>)\n    });\n  } <span class=\"pl-k\">else</span> {\n    <span class=\"pl-c\">// Use web download API</span>\n    <span class=\"pl-k\">const</span> <span class=\"pl-c1\">link</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">document</span>.<span class=\"pl-c1\">createElement</span>(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>a<span class=\"pl-pds\">'</span></span>);\n    <span class=\"pl-smi\">link</span>.<span class=\"pl-smi\">download</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>chart.png<span class=\"pl-pds\">'</span></span>;\n    <span class=\"pl-smi\">link</span>.<span class=\"pl-c1\">href</span> <span class=\"pl-k\">=</span> <span class=\"pl-smi\">canvas</span>.<span class=\"pl-c1\">toDataURL</span>();\n    <span class=\"pl-smi\">link</span>.<span class=\"pl-c1\">click</span>();\n  }\n}\n</code></pre>\n<h5>Since:</h5><p>1.0.0</p>\n"},"parentId":1168}
