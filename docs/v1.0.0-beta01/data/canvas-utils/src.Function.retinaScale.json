{"id":1715,"name":"retinaScale","kind":64,"kindString":"Function","flags":{},"children":[],"sources":[{"fileName":"packages/canvas-utils/src/canvas/drawer.ts","fullFileName":"/home/runner/work/fe-tools/fe-tools/utils/packages/canvas-utils/src/canvas/drawer.ts","line":335,"character":16,"url":"https://github.com/MichealWayne/fe-tools/blob/e75b369/utils/packages/canvas-utils/src/canvas/drawer.ts#L335"}],"signatures":[{"id":1716,"name":"retinaScale","kind":4096,"kindString":"Call signature","flags":{},"comment":{"summary":[],"blockTags":[{"tag":"@function","content":[{"kind":"text","text":"retinaScale"}]},{"tag":"@description","content":[{"kind":"text","text":"Canvas元素适配移动端机型，for web。Adapts canvas elements for high-DPI (Retina) displays by scaling the canvas resolution while maintaining the display size. This ensures crisp rendering on devices with pixel ratios greater than 1."}]},{"tag":"@returns","content":[{"kind":"text","text":"The device pixel ratio that was applied (1 for standard displays, >1 for high-DPI displays)"}]},{"tag":"@example","content":[{"kind":"text","text":"// Basic retina scaling setup\r\nconst canvas = document.getElementById('myCanvas');\r\nconst ctx = canvas.getContext('2d');\r\n\r\n// Set initial canvas size\r\ncanvas.width = 400;\r\ncanvas.height = 300;\r\n\r\n// Apply retina scaling\r\nconst pixelRatio = retinaScale(canvas, ctx);\r\nconsole.log("},{"kind":"code","text":"`Applied pixel ratio: ${pixelRatio}`"},{"kind":"text","text":");"}]},{"tag":"@example","content":[{"kind":"code","text":"```ts\n// Complete setup for high-DPI canvas\r\nfunction setupCanvas(canvasId) {\r\n  const canvas = document.getElementById(canvasId);\r\n  const ctx = canvas.getContext('2d');\r\n\r\n  // Set desired display size\r\n  canvas.width = 500;\r\n  canvas.height = 400;\r\n\r\n  // Apply retina scaling\r\n  const ratio = retinaScale(canvas, ctx);\r\n\r\n  // Now draw with normal coordinates\r\n  ctx.fillStyle = '#0066cc';\r\n  ctx.fillRect(10, 10, 100, 100); // Will be crisp on all displays\r\n\r\n  return { canvas, ctx, ratio };\r\n}\n```"}]},{"tag":"@since","content":[{"kind":"text","text":"1.0.0"}]}]},"parameters":[{"id":1717,"name":"canvas","kind":32768,"kindString":"Parameter","flags":{},"comment":{"summary":[{"kind":"text","text":"The HTML canvas element to scale"}]},"type":{"type":"reference","name":"HTMLCanvasElement","qualifiedName":"HTMLCanvasElement","package":"typescript"},"text":{"comment":"<p>The HTML canvas element to scale</p>\n"}},{"id":1718,"name":"ctx","kind":32768,"kindString":"Parameter","flags":{},"comment":{"summary":[{"kind":"text","text":"The 2D rendering context of the canvas element"}]},"type":{"type":"reference","name":"CanvasRenderingContext2D","qualifiedName":"CanvasRenderingContext2D","package":"typescript"},"text":{"comment":"<p>The 2D rendering context of the canvas element</p>\n"}}],"type":{"type":"intrinsic","name":"number"},"is":{"declaration":false},"location":{"query":"canvas-utils/src.Function.retinaScale","hash":"retinaScale"},"text":{"comment":"<h5>Function:</h5><p>retinaScale</p>\n<h5>Description:</h5><p>Canvas元素适配移动端机型，for web。Adapts canvas elements for high-DPI (Retina) displays by scaling the canvas resolution while maintaining the display size. This ensures crisp rendering on devices with pixel ratios greater than 1.</p>\n<h5>Returns:</h5><p>The device pixel ratio that was applied (1 for standard displays, &gt;1 for high-DPI displays)</p>\n<h5>Example:</h5><p>// Basic retina scaling setup\nconst canvas = document.getElementById(&#39;myCanvas&#39;);\nconst ctx = canvas.getContext(&#39;2d&#39;);</p>\n<p>// Set initial canvas size\ncanvas.width = 400;\ncanvas.height = 300;</p>\n<p>// Apply retina scaling\nconst pixelRatio = retinaScale(canvas, ctx);\nconsole.log(<code>Applied pixel ratio: ${pixelRatio}</code>);</p>\n<h5>Example:</h5><pre><code class=\"language-ts\"><span class=\"pl-c\">// Complete setup for high-DPI canvas</span>\n<span class=\"pl-k\">function</span> <span class=\"pl-en\">setupCanvas</span>(<span class=\"pl-v\">canvasId</span>) {\n  <span class=\"pl-k\">const</span> <span class=\"pl-c1\">canvas</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">document</span>.<span class=\"pl-c1\">getElementById</span>(<span class=\"pl-smi\">canvasId</span>);\n  <span class=\"pl-k\">const</span> <span class=\"pl-c1\">ctx</span> <span class=\"pl-k\">=</span> <span class=\"pl-smi\">canvas</span>.<span class=\"pl-c1\">getContext</span>(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>2d<span class=\"pl-pds\">'</span></span>);\n\n  <span class=\"pl-c\">// Set desired display size</span>\n  <span class=\"pl-smi\">canvas</span>.<span class=\"pl-c1\">width</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">500</span>;\n  <span class=\"pl-smi\">canvas</span>.<span class=\"pl-c1\">height</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">400</span>;\n\n  <span class=\"pl-c\">// Apply retina scaling</span>\n  <span class=\"pl-k\">const</span> <span class=\"pl-c1\">ratio</span> <span class=\"pl-k\">=</span> <span class=\"pl-en\">retinaScale</span>(<span class=\"pl-smi\">canvas</span>, <span class=\"pl-smi\">ctx</span>);\n\n  <span class=\"pl-c\">// Now draw with normal coordinates</span>\n  <span class=\"pl-smi\">ctx</span>.<span class=\"pl-smi\">fillStyle</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>#0066cc<span class=\"pl-pds\">'</span></span>;\n  <span class=\"pl-smi\">ctx</span>.<span class=\"pl-en\">fillRect</span>(<span class=\"pl-c1\">10</span>, <span class=\"pl-c1\">10</span>, <span class=\"pl-c1\">100</span>, <span class=\"pl-c1\">100</span>); <span class=\"pl-c\">// Will be crisp on all displays</span>\n\n  <span class=\"pl-k\">return</span> { <span class=\"pl-smi\">canvas</span>, <span class=\"pl-smi\">ctx</span>, <span class=\"pl-smi\">ratio</span> };\n}\n</code></pre>\n<h5>Since:</h5><p>1.0.0</p>\n"},"sources":[{"fileName":"packages/canvas-utils/src/canvas/drawer.ts","fullFileName":"/home/runner/work/fe-tools/fe-tools/utils/packages/canvas-utils/src/canvas/drawer.ts","line":335,"character":0,"url":"https://github.com/MichealWayne/fe-tools/blob/e75b369/utils/packages/canvas-utils/src/canvas/drawer.ts#L335"}],"parentId":1715}],"is":{"declaration":true},"location":{"query":"canvas-utils/src.Function.retinaScale","hash":""},"text":{},"parentId":1168}
